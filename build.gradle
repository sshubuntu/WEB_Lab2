
plugins {
    id 'java'
    id 'war'
    id("com.github.spotbugs") version "6.4.4"
    id("io.snyk.gradle.plugin.snykplugin") version "0.7.0"
}

group = 'sshubuntu.server'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

spotbugs {
    ignoreFailures = false
    showStackTraces = true
    showProgress = true
    reportsDir = file("$buildDir/spotbugs")
    onlyAnalyze = ["sshubuntu.server.*"]
    maxHeapSize = "1g"
}

snyk {
    token = System.getenv('SNYK_TOKEN')
    autoDownload = true
    autoUpdate = true
    arguments = ['--severity-threshold=high']
}

dependencies {
    compileOnly 'jakarta.servlet:jakarta.servlet-api:6.0.0'
    compileOnly 'jakarta.servlet.jsp:jakarta.servlet.jsp-api:3.1.1'
    implementation 'org.glassfish.web:jakarta.servlet.jsp.jstl:2.0.0'
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.15.2'
    implementation 'org.owasp.encoder:encoder:1.3.1'
    spotbugsPlugins 'com.h3xstream.findsecbugs:findsecbugs-plugin:1.14.0'
}

war {
    duplicatesStrategy = DuplicatesStrategy.WARN
    archiveFileName = 'WEB_Lab2.war'
}